version: 2.1
jobs:
  build:
    docker:
      - image: ftsrg/pygraphblas-notebook
    resource_class: xlarge
    steps:
      - checkout
      - run:
          name: Load test data
          command: |
            cd csvs/
            sha1sum -c o1k.sha1 || ( wget "https://www.dropbox.com/s/sgrwihjji551teq/o1k.zip?dl=1" -O temp.zip && unzip temp.zip && rm temp.zip )
      - run: python/scripts/run_all_queries.sh
